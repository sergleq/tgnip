# –°–≤–æ–¥–∫–∞ —É–ª—É—á—à–µ–Ω–∏–π –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏ —Å–∞–π—Ç–æ–≤

## üéØ –ü—Ä–æ–±–ª–µ–º–∞

–ú–Ω–æ–≥–∏–µ —Å–∞–π—Ç—ã –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—é—Ç –¥–æ—Å—Ç—É–ø –∫ —Å–≤–æ–µ–º—É –∫–æ–Ω—Ç–µ–Ω—Ç—É —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏:
- **Rate limiting** (HTTP 429)
- **User-Agent –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞**
- **CAPTCHA –∏ JavaScript –∑–∞—â–∏—Ç—ã**
- **–ì–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### 1. **Retry –ª–æ–≥–∏–∫–∞ —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π**

**–§—É–Ω–∫—Ü–∏–∏:**
- `shouldRetry()` - –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –Ω—É–∂–Ω–æ –ª–∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –∑–∞–ø—Ä–æ—Å
- `getRetryDelay()` - –≤—ã—á–∏—Å–ª—è–µ—Ç –∑–∞–¥–µ—Ä–∂–∫—É —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–º —Ä–æ—Å—Ç–æ–º
- `extractContentWithRetry()` - –æ—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Å retry –ª–æ–≥–∏–∫–æ–π

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –∑–∞–¥–µ—Ä–∂–∫–∏: 1s ‚Üí 2s ‚Üí 4s ‚Üí 8s ‚Üí 16s ‚Üí 30s (–º–∞–∫—Å)
- –°–æ–±–ª—é–¥–µ–Ω–∏–µ Retry-After –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–∏ 30 —Å–µ–∫—É–Ω–¥–∞–º–∏

### 2. **–ò–º–∏—Ç–∞—Ü–∏—è –±—Ä–∞—É–∑–µ—Ä–∞**

**–§—É–Ω–∫—Ü–∏–∏:**
- `createRequest()` - —Å–æ–∑–¥–∞–µ—Ç HTTP –∑–∞–ø—Ä–æ—Å —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏
- `createHTTPClient()` - –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç HTTP –∫–ª–∏–µ–Ω—Ç

**–ó–∞–≥–æ–ª–æ–≤–∫–∏:**
```go
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36...
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8
Accept-Language: en-US,en;q=0.5
Accept-Encoding: gzip, deflate
Connection: keep-alive
Upgrade-Insecure-Requests: 1
Sec-Fetch-Dest: document
Sec-Fetch-Mode: navigate
Sec-Fetch-Site: none
Cache-Control: max-age=0
```

### 3. **–£–º–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**

**–°—Ç–∞—Ç—É—Å—ã –¥–ª—è retry:**
- `429` - Too Many Requests
- `500`, `502`, `503`, `504` - Server errors
- `408` - Request Timeout
- –õ—é–±—ã–µ —Å–µ—Ç–µ–≤—ã–µ –æ—à–∏–±–∫–∏

**–°—Ç–∞—Ç—É—Å—ã –±–µ–∑ retry:**
- `404` - Not Found (–ø–æ—Å—Ç–æ—è–Ω–Ω–∞—è –æ—à–∏–±–∫–∞)
- `403` - Forbidden (–ø–æ—Å—Ç–æ—è–Ω–Ω–∞—è –æ—à–∏–±–∫–∞)
- `200` - OK (—É—Å–ø–µ—Ö)

### 4. **–ö–æ–Ω—Ç—Ä–æ–ª—å —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–æ–≤**

**–ù–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
- `MAX_FILE_SIZE` - –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10MB)
- `REQUEST_DELAY` - –∑–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1000ms)
- `MAX_CONCURRENT_REQUESTS` - –º–∞–∫—Å–∏–º—É–º –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 5)

## üìä –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```env
# HTTP Client Configuration
HTTP_TIMEOUT=30                # –¢–∞–π–º–∞—É—Ç HTTP –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
MAX_RETRIES=3                  # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫
MAX_FILE_SIZE=10485760         # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –≤ –±–∞–π—Ç–∞—Ö (10MB)
REQUEST_DELAY=1000             # –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏ –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö
MAX_CONCURRENT_REQUESTS=5      # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|----------|
| `HTTP_TIMEOUT` | 30 —Å–µ–∫ | –¢–∞–π–º–∞—É—Ç –¥–ª—è HTTP –∑–∞–ø—Ä–æ—Å–æ–≤ |
| `MAX_RETRIES` | 3 | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫ |
| `MAX_FILE_SIZE` | 10MB | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –∑–∞–≥—Ä—É–∂–∞–µ–º–æ–≥–æ —Ñ–∞–π–ª–∞ |
| `REQUEST_DELAY` | 1000 –º—Å | –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏ |
| `MAX_CONCURRENT_REQUESTS` | 5 | –ú–∞–∫—Å–∏–º—É–º –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ |

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ù–æ–≤—ã–µ —Ç–µ—Å—Ç—ã

```go
func TestShouldRetry(t *testing.T)     // –¢–µ—Å—Ç–∏—Ä—É–µ—Ç –ª–æ–≥–∏–∫—É retry
func TestGetRetryDelay(t *testing.T)   // –¢–µ—Å—Ç–∏—Ä—É–µ—Ç –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ –∑–∞–¥–µ—Ä–∂–∫–∏
func TestCreateHTTPClient(t *testing.T) // –¢–µ—Å—Ç–∏—Ä—É–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ HTTP –∫–ª–∏–µ–Ω—Ç–∞
func TestCreateRequest(t *testing.T)    // –¢–µ—Å—Ç–∏—Ä—É–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞
```

### –ü—Ä–∏–º–µ—Ä—ã —Ç–µ—Å—Ç–æ–≤

```go
// –¢–µ—Å—Ç retry –ª–æ–≥–∏–∫–∏
{"429 Too Many Requests", 429, nil, true},
{"500 Internal Server Error", 500, nil, true},
{"200 OK", 200, nil, false},

// –¢–µ—Å—Ç —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–∏
{"First attempt", 0, 1 * time.Second},
{"Second attempt", 1, 2 * time.Second},
{"Third attempt", 2, 4 * time.Second},
```

## üìà –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ù–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ª–æ–≥–æ–≤

```
üîç –ü–æ–ø—ã—Ç–∫–∞ 1/4 –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –∏–∑: https://example.com
‚ö†Ô∏è Rate limit –ø—Ä–µ–≤—ã—à–µ–Ω –¥–ª—è https://example.com (–ø–æ–ø—ã—Ç–∫–∞ 1)
‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ 5s —Å–æ–≥–ª–∞—Å–Ω–æ Retry-After –∑–∞–≥–æ–ª–æ–≤–∫—É...
üìè –†–∞–∑–º–µ—Ä –∫–æ–Ω—Ç–µ–Ω—Ç–∞: 1048576 –±–∞–π—Ç
‚úÖ –ö–æ–Ω—Ç–µ–Ω—Ç —É—Å–ø–µ—à–Ω–æ –∏–∑–≤–ª–µ—á–µ–Ω: –∑–∞–≥–æ–ª–æ–≤–æ–∫='Example Article', –∞–≤—Ç–æ—Ä='John Doe', –¥–∞—Ç–∞='2024-01-01'
```

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### –î–ª—è –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã—Ö —Å–∞–π—Ç–æ–≤
```env
HTTP_TIMEOUT=60
MAX_RETRIES=5
REQUEST_DELAY=2000
```

### –î–ª—è —Å—Ç–∞–±–∏–ª—å–Ω—ã—Ö —Å–∞–π—Ç–æ–≤
```env
HTTP_TIMEOUT=15
MAX_RETRIES=2
REQUEST_DELAY=500
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ rate limiting
grep "Rate limit" logs/app.log

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ø–µ—à–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
grep "‚úÖ –ö–æ–Ω—Ç–µ–Ω—Ç —É—Å–ø–µ—à–Ω–æ –∏–∑–≤–ª–µ—á–µ–Ω" logs/app.log
```

## üîß –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Config
```go
type Config struct {
    // HTTP –∫–ª–∏–µ–Ω—Ç
    HTTPTimeout int
    MaxRetries  int
    MaxFileSize int64

    // Rate limiting
    RequestDelay int
    MaxConcurrentRequests int
    
    // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è
}
```

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
```go
func createHTTPClient(config *Config) *http.Client
func createRequest(url string) (*http.Request, error)
func shouldRetry(statusCode int, err error) bool
func getRetryDelay(attempt int) time.Duration
func extractContentWithRetry(pageURL string, config *Config) (*Content, error)
```

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- `RATE_LIMITING_GUIDE.md` - –ø–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
- `WEBHOOK_SETUP.md` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ webhook
- –û–±–Ω–æ–≤–ª–µ–Ω `README.md` —Å –Ω–æ–≤–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
- –û–±–Ω–æ–≤–ª–µ–Ω `env.example` —Å –Ω–æ–≤—ã–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

### –î–æ —É–ª—É—á—à–µ–Ω–∏–π
- –ü—Ä–æ—Å—Ç–æ–π HTTP –∫–ª–∏–µ–Ω—Ç –±–µ–∑ retry –ª–æ–≥–∏–∫–∏
- –ë–∞–∑–æ–≤—ã–π User-Agent
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ rate limiting
- –ù–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª—è —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–æ–≤

### –ü–æ—Å–ª–µ —É–ª—É—á—à–µ–Ω–∏–π
- ‚úÖ Retry –ª–æ–≥–∏–∫–∞ —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π
- ‚úÖ –ò–º–∏—Ç–∞—Ü–∏—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –±—Ä–∞—É–∑–µ—Ä–∞
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ HTTP 429 –∏ –¥—Ä—É–≥–∏—Ö –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ—à–∏–±–æ–∫
- ‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª—å —Ä–∞–∑–º–µ—Ä–∞ –∑–∞–≥—Ä—É–∂–∞–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤
- ‚úÖ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚úÖ –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ –ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ë–æ—Ç —Ç–µ–ø–µ—Ä—å –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –ª—É—á—à–µ —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏ —Å–∞–π—Ç–æ–≤ –∏ –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –±–æ–ª–µ–µ —à–∏—Ä–æ–∫–∏–º —Å–ø–µ–∫—Ç—Ä–æ–º –≤–µ–±-—Ä–µ—Å—É—Ä—Å–æ–≤. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç:

1. **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ—à–∏–±–æ–∫
2. **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - –æ–±—Ö–æ–¥ –ø—Ä–æ—Å—Ç—ã—Ö –º–µ—Ç–æ–¥–æ–≤ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
3. **–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ—Å—Ç—å** - –≥–∏–±–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ–¥ —Ä–∞–∑–Ω—ã–µ —Å–∞–π—Ç—ã
4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
5. **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å** - –ø–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏

–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ–±—Ä–∞—Ç–Ω–æ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã –∏ –Ω–µ –Ω–∞—Ä—É—à–∞—é—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å.
