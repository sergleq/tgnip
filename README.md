# Telegram Bot –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è —Å—Å—ã–ª–æ–∫ –≤ Markdown

–ë–æ—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –∏–∑ –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü –∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –≤ markdown —Ñ–∞–π–ª—ã —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º–∞, –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ webhook.

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### ‚úÖ –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:
- **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞** –∏–∑ –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü
- **–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ Markdown** —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–æ–¥–∞** —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º —è–∑—ã–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è
- **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö** (–∑–∞–≥–æ–ª–æ–≤–æ–∫, –∞–≤—Ç–æ—Ä, –¥–∞—Ç–∞)
- **–õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è** –Ω–∞ —Ä—É—Å—Å–∫–æ–º –∏ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º —è–∑—ã–∫–∞—Ö

### ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
- **Worker Pool** –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
- **Rate Limiting** –¥–ª—è Telegram API
- **–ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏** –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- **Graceful handling** –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏

### ‚úÖ –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã:
- **Polling** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) - –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- **Webhook** - –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ —Å –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–æ–π

### ‚úÖ –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è:
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **–õ–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ markdown —Ñ–∞–π–ª—ã** –Ω–∞ —è–∑—ã–∫–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **Fallback –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π** –¥–ª—è –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã—Ö —è–∑—ã–∫–æ–≤

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- Go 1.21+
- Telegram Bot Token

### –°–±–æ—Ä–∫–∞:
```bash
git clone https://github.com/sergleq/tgnip.git
cd tgnip
go build -ldflags="-s -w" -o tgnip .
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ë–∞–∑–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:
```bash
# –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ
TELEGRAM_BOT_TOKEN=your_bot_token_here

# HTTP –∫–ª–∏–µ–Ω—Ç
HTTP_TIMEOUT=30                   # –¢–∞–π–º–∞—É—Ç HTTP –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
MAX_RETRIES=3                     # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–≤—Ç–æ—Ä–æ–≤

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
LOG_LEVEL=info                    # debug, info, warn, error
```

### Webhook –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
```bash
# Webhook —Ä–µ–∂–∏–º
WEBHOOK_URL=https://your-domain.com  # URL –¥–ª—è webhook
WEBHOOK_PORT=8443                     # –ü–æ—Ä—Ç –¥–ª—è webhook —Å–µ—Ä–≤–µ—Ä–∞
SSL_CERT_FILE=/path/to/cert.pem       # SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
SSL_KEY_FILE=/path/to/key.pem         # SSL –∫–ª—é—á
```

## üöÄ –ó–∞–ø—É—Å–∫

### Polling —Ä–µ–∂–∏–º (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é):
```bash
./tgnip
```

### Webhook —Ä–µ–∂–∏–º:
```bash
WEBHOOK_URL=https://your-domain.com ./tgnip
```

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Å ngrok:
```bash
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ ngrok
ngrok http 8443

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞ —Å –ø–æ–ª—É—á–µ–Ω–Ω—ã–º URL
WEBHOOK_URL=https://your-ngrok-url.ngrok.io ./tgnip
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏:
```
INFO[2025-08-13T15:21:00Z] –ë–æ—Ç UrlToMarkdown_bot –∑–∞–ø—É—â–µ–Ω
INFO[2025-08-13T15:21:00Z] –ó–∞–ø—É—Å–∫ –≤ polling —Ä–µ–∂–∏–º–µ
INFO[2025-08-13T15:21:05Z] –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 123456
```

### Health check (webhook —Ä–µ–∂–∏–º):
```bash
curl https://your-domain.com/health
```

## üîß –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞:
- `/start` - –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ

### –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Å—ã–ª–æ–∫:
1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü—É –±–æ—Ç—É
2. –ë–æ—Ç –∏–∑–≤–ª–µ—á–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç –∏ —Å–æ–∑–¥–∞—Å—Ç markdown —Ñ–∞–π–ª
3. –§–∞–π–ª –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω —Å –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–º–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏

### –ü—Ä–∏–º–µ—Ä—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö —Å–∞–π—Ç–æ–≤:
- –°—Ç–∞—Ç—å–∏ –∏ –Ω–æ–≤–æ—Å—Ç–∏
- –ë–ª–æ–≥-–ø–æ—Å—Ç—ã
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Å—Ç–∞—Ç—å–∏

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤:
```bash
# –í—Å–µ —Ç–µ—Å—Ç—ã
go test -v
```

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [PARALLELISM.md](PARALLELISM.md) - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º—É
- [WEBHOOK.md](WEBHOOK.md) - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ webhook
- [LOCALIZATION_EXAMPLES.md](LOCALIZATION_EXAMPLES.md) - –ü—Ä–∏–º–µ—Ä—ã –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏
- [REFACTORING_REPORT.md](REFACTORING_REPORT.md) - –û—Ç—á–µ—Ç –æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–µ

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### Webhook:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–µ–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–æ–∫–µ–Ω–∞
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –∑–∞–ø—Ä–æ—Å–æ–≤
- –í–∞–ª–∏–¥–∞—Ü–∏—è JSON –¥–∞–Ω–Ω—ã—Ö
- SSL/TLS –ø–æ–¥–¥–µ—Ä–∂–∫–∞

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:
- Graceful handling –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏
- Fallback –º–µ—Ö–∞–Ω–∏–∑–º—ã
- –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

## üõ†Ô∏è –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞:
```
tgnip/
‚îú‚îÄ‚îÄ main.go                 # –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∏ worker pool
‚îú‚îÄ‚îÄ webhook.go              # Webhook —Å–µ—Ä–≤–µ—Ä
‚îú‚îÄ‚îÄ config.go               # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ content_extractor.go    # –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
‚îú‚îÄ‚îÄ markdown_converter.go   # –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ markdown
‚îú‚îÄ‚îÄ localization.go         # –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
‚îú‚îÄ‚îÄ *_test.go              # –¢–µ—Å—Ç—ã
‚îî‚îÄ‚îÄ *.md                   # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —è–∑—ã–∫–æ–≤:
1. –î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–π —è–∑—ã–∫ –≤ `localization.go`
2. –ü–µ—Ä–µ–≤–µ–¥–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏
3. –î–æ–±–∞–≤—å—Ç–µ —Ç–µ—Å—Ç—ã
4. –û–±–Ω–æ–≤–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

1. Fork —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
2. –°–æ–∑–¥–∞–π—Ç–µ feature branch
3. –í–Ω–µ—Å–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
4. –î–æ–±–∞–≤—å—Ç–µ —Ç–µ—Å—Ç—ã
5. –°–æ–∑–¥–∞–π—Ç–µ Pull Request

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- –°–æ–∑–¥–∞–π—Ç–µ Issue –¥–ª—è –±–∞–≥–æ–≤
- –û–±—Å—É–¥–∏—Ç–µ –Ω–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤ Discussions
- –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ 